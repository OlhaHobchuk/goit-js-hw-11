{"mappings":"qhBAAA,IAAAA,EAAAC,EAAA,S,8BAQA,MAAMC,EAAO,CACTC,KAAMC,SAASC,cAAc,gBAC7BC,iBAAkBF,SAASC,cAAc,YACzCE,SAAUH,SAASI,iBAAiB,eAGlCC,EAAkB,IAAI,EAAAT,EAAAU,iBAEtBC,EAAa,IChBnB,MAOEC,UAAUC,GACR,OAAOT,SAASC,cAAcQ,E,CAGhCC,OACEC,KAAKC,OAAOC,UAAUC,IAAI,S,CAG5BC,OACEJ,KAAKC,OAAOC,UAAUG,OAAO,S,CAG/BC,UACEN,KAAKC,OAAOM,UAAW,EACvBP,KAAKC,OAAOO,YAAc,Y,CAG1BC,SACAT,KAAKC,OAAOS,gBAAgB,YAC5BV,KAAKC,OAAOO,YAAc,W,CAzB1BG,aAAYb,SAAEA,EAAQc,SAAEA,IACxBZ,KAAKC,OAASD,KAAKH,UAAUC,GACzBc,EAAUZ,KAAKD,OACdC,KAAKI,M,GDYoB,CAC9BN,SAAU,aACVc,UAAU,IAGd,IAAIC,EAAU,IAAIC,EAAAC,GAAJ,CAAmB,cAoEjC,SAASC,EAAWC,GAChB,MAAQC,aAAAC,EAAcC,cAAAC,EAAeC,KAAAC,EAAMC,MAAAC,EAAOC,MAAAC,EAAOC,SAAAC,EAAUC,UAAAC,GAAcd,EACjF,IAAIe,EAAS,GA0Bb,OAxBAA,EAASf,EAAKgB,KAAI,EAACf,aAAEA,EAAYE,cAAEA,EAAaE,KAAEA,EAAIE,MAAEA,EAAKE,MAAEA,EAAKE,SAAEA,EAAQE,UAAEA,KACrE,YAAYV,+DACbF,WAAsBI,2GAItBE,kFAIAE,uFAICE,wFAIDE,6CAGAI,KAAK,IAEf/C,EAAKI,iBAAiB4C,mBAAmB,YAAaH,GACvCnB,EAAQuB,S,CAG3B,SAASC,EAAQC,GACgB,IAAzB5C,EAAgB6C,KACpBzB,EAAA0B,GAASC,OAAOC,QAAQ,oBAAoBJ,EAAKK,qBACvCL,EAAKrB,KAAK2B,OAASlD,EAAgBmD,UAC7CjD,EAAWG,OACXe,EAAA0B,GAASC,OAAOK,QAAQ,+DAExBC,QAAQC,IAAIV,EAAKrB,K,CAQrB,SAASgC,EAAQC,GACbH,QAAQC,IAAIE,GACdpC,EAAA0B,GAASC,OAAOU,QACd,4EAGFvD,EAAWG,M,CArHbZ,EAAKC,KAAKgE,MAAMC,QAAU,OAC1BlE,EAAKC,KAAKgE,MAAME,eAAiB,SACjCnE,EAAKC,KAAKgE,MAAMG,QAAU,OAC1BpE,EAAKC,KAAKgE,MAAMI,gBAAkB,OAGlCrE,EAAKI,iBAAiB6D,MAAMC,QAAU,OACtClE,EAAKI,iBAAiB6D,MAAMK,SAAW,OACvCtE,EAAKI,iBAAiB6D,MAAMM,IAAM,OAClCvE,EAAKI,iBAAiB6D,MAAMC,QAAU,OACtClE,EAAKI,iBAAiB6D,MAAME,eAAiB,gBAC7CnE,EAAKI,iBAAiB6D,MAAMG,QAAU,OAKtCpE,EAAKC,KAAKuE,iBAAiB,UAI3B,SAAsBC,GAKlB,GAHAA,EAAMC,iBACNnE,EAAgBoE,MAAQF,EAAMG,cAAcC,SAASC,YAAYC,MAAMC,QAElEzE,EAAgBoE,MAEjB,YADAhD,EAAA0B,GAASC,OAAOK,QAAQ,0CAO5B,OAHApD,EAAgB0E,YAChBxE,EAAWQ,OACXR,EAAWU,UACJZ,EACF2E,cACAC,MAAKhC,IACFD,EAAQC,GACDA,EAAKrB,QAEfqD,KAAKtD,GAAYuD,MAAMtB,GAASuB,SAAQ,KACzCrF,EAAKC,KAAKqF,QACV7E,EAAWa,QAAQ,G,IAxB3Bb,EAAWK,OAAO0D,iBAAiB,SA8BnC,SAA2BC,GAGvB,OAFAhE,EAAWU,UACXV,EAAWQ,OACJV,EACF2E,cACAC,MAAKhC,IACFD,EAAQC,GACDA,EAAKrB,QAEfqD,KAAKtD,GAAYuD,MAAMtB,GAASuB,SAAQ,KACzCrF,EAAKC,KAAKqF,QACV7E,EAAWa,QAAQ,G","sources":["src/forbutton.js","src/loadButton.js"],"sourcesContent":["import { ImageApiService } from \"./api-sourse\";\nimport { LoadButton } from \"./loadButton\";\nimport Notiflix from 'notiflix';\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\n\n\nconst refs = {\n    form: document.querySelector(\".search-form\"),\n    galleryContainer: document.querySelector(\".gallery\"),\n    infoItem: document.querySelectorAll(\".info-item\")\n}\n\nconst imageApiService = new ImageApiService();\n\nconst loadButton = new LoadButton({\n    selector: '.load-more',\n    isHidden: true\n});\n\nlet gallery = new SimpleLightbox('.gallery a');\n\n\nrefs.form.style.display = \"flex\";\nrefs.form.style.justifyContent = \"center\";\nrefs.form.style.padding = \"20px\";\nrefs.form.style.backgroundColor = \"blue\";\n\n\nrefs.galleryContainer.style.display = \"flex\";\nrefs.galleryContainer.style.flexWrap = \"wrap\";\nrefs.galleryContainer.style.gap = \"30px\";\nrefs.galleryContainer.style.display = \"flex\";\nrefs.galleryContainer.style.justifyContent = \"space-between\";\nrefs.galleryContainer.style.padding = \"20px\";\n\n\n\n\nrefs.form.addEventListener('submit', onFormSubmit);\nloadButton.button.addEventListener('click', onLoadButtonClick);\n\n\nfunction onFormSubmit(event) {\n    \n    event.preventDefault();\n    imageApiService.query = event.currentTarget.elements.searchQuery.value.trim();\n\n    if (!imageApiService.query) {\n        Notiflix.Notify.warning(\"Please, enter something and try again!\");\n        return\n    }\n    \n    imageApiService.resetPage();\n    loadButton.show();\n    loadButton.disable();\n    return imageApiService\n        .fetchImages()\n        .then(data => {\n            message(data);\n            return data.hits\n        })\n        .then(makeMarkup).catch(onError).finally(() => {\n        refs.form.reset();\n        loadButton.enable();\n    });\n    clearGalleryContainer();\n    \n}\n\nfunction onLoadButtonClick(event) {\n    loadButton.disable();\n    loadButton.show();\n    return imageApiService\n        .fetchImages()\n        .then(data => {\n            message(data);\n            return data.hits\n        })\n        .then(makeMarkup).catch(onError).finally(() => {\n        refs.form.reset();\n        loadButton.enable();\n    });\n    \n}\n\n\n\nfunction makeMarkup(hits) {\n    const { webformatURL, largeImageURL, tags, likes, views, comments, downloads } = hits;\n    let markup = \"\";\n\n    markup = hits.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => {\n        return `<a href=\"${largeImageURL}\" class=\"image-link\"><div class=\"photo-card\">\n  <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n  <div class=\"info\">\n    <p class=\"info-item\">\n      <b>Likes:</b>\n      <span>${likes}<span>\n    </p>\n    <p class=\"info-item\">\n      <b>Views:</b>\n      <span>${views}</span>\n    </p>\n    <p class=\"info-item\">\n      <b>Comments:</b>\n      <span> ${comments}</span>\n    </p>\n    <p class=\"info-item\">\n      <b>Downloads: </b>\n      <span>${downloads}</span>\n    </p>\n  </div>\n</div></a>`}).join('');\n\n    refs.galleryContainer.insertAdjacentHTML(\"beforeend\", markup);\n    return markup, gallery.refresh();\n}\n\nfunction message(data) {\n    if (imageApiService.page === 2) {\n    Notiflix.Notify.success(`Hooray! We found ${data.totalHits} images.`); \n    }else if (data.hits.length < imageApiService.perPage) {\n    loadButton.hide();\n    Notiflix.Notify.warning(\"We're sorry, but you've reached the end of search results.\");\n    } \n    console.log(data.hits);\n  }\n\n\nfunction clearGalleryContainer() {\n    refs.galleryContainer.innerHTML = \"\";\n}\n\nfunction onError(error) {\n    console.log(error);\n  Notiflix.Notify.failure(\n    'Sorry, there are no images matching your search query. Please try again.'\n  );\n  \n  loadButton.hide();\n}","class LoadButton {\n    constructor({ selector, isHidden }) {\n    this.button = this.getButton(selector);\n    if (isHidden) this.hide();\n    else this.show();\n  }\n\n  getButton(selector) {\n    return document.querySelector(selector);\n  }\n\n  hide() {\n    this.button.classList.add(\"hidden\");\n  }\n\n  show() {\n    this.button.classList.remove(\"hidden\");\n  }\n\n  disable() {\n    this.button.disabled = true;\n    this.button.textContent = \"Loading...\";\n    }\n\n    enable() {\n    this.button.removeAttribute('disabled');\n    this.button.textContent = \"Load more\";\n  }\n}\n    \n\n\nexport { LoadButton };"],"names":["$2RDrW","parcelRequire","$fa428bac10e85dcc$var$refs","form","document","querySelector","galleryContainer","infoItem","querySelectorAll","$fa428bac10e85dcc$var$imageApiService","ImageApiService","$fa428bac10e85dcc$var$loadButton","getButton","selector","hide","this","button","classList","add","show","remove","disable","disabled","textContent","enable","removeAttribute","constructor","isHidden","$fa428bac10e85dcc$var$gallery","$parcel$interopDefault","$fZKcF","$fa428bac10e85dcc$var$makeMarkup","hits","webformatURL","webformatURL1","largeImageURL","largeImageURL1","tags","tags1","likes","likes1","views","views1","comments","comments1","downloads","downloads1","markup","map","join","insertAdjacentHTML","refresh","$fa428bac10e85dcc$var$message","data","page","$7Y9D8","Notify","success","totalHits","length","perPage","warning","console","log","$fa428bac10e85dcc$var$onError","error","failure","style","display","justifyContent","padding","backgroundColor","flexWrap","gap","addEventListener","event","preventDefault","query","currentTarget","elements","searchQuery","value","trim","resetPage","fetchImages","then","catch","finally","reset"],"version":3,"file":"load-button.edc49bf7.js.map"}