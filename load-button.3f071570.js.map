{"mappings":"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","sources":["src/forbutton.js","src/loadButton.js"],"sourcesContent":["import { ImageApiService } from \"./api-sourse\";\nimport { LoadButton } from \"./loadButton\";\nimport Notiflix from 'notiflix';\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\n\n\nconst refs = {\n    form: document.querySelector(\".search-form\"),\n    galleryContainer: document.querySelector(\".gallery\"),\n    infoItem: document.querySelectorAll(\".info-item\")\n}\n\nconst imageApiService = new ImageApiService();\n\nconst loadButton = new LoadButton({\n    selector: '.load-more',\n    isHidden: true\n});\n\nlet gallery = new SimpleLightbox('.gallery a');\n\n\nrefs.form.style.display = \"flex\";\nrefs.form.style.justifyContent = \"center\";\nrefs.form.style.padding = \"20px\";\nrefs.form.style.backgroundColor = \"blue\";\n\n\nrefs.galleryContainer.style.display = \"flex\";\nrefs.galleryContainer.style.flexWrap = \"wrap\";\nrefs.galleryContainer.style.gap = \"30px\";\nrefs.galleryContainer.style.display = \"flex\";\nrefs.galleryContainer.style.justifyContent = \"space-between\";\nrefs.galleryContainer.style.padding = \"20px\";\n\n\n\n\nrefs.form.addEventListener('submit', onFormSubmit);\nloadButton.button.addEventListener('click', onLoadButtonClick);\n\n\nfunction onFormSubmit(event) {\n    \n    event.preventDefault();\n    imageApiService.query = event.currentTarget.elements.searchQuery.value.trim();\n\n    if (!imageApiService.query) {\n        Notiflix.Notify.warning(\"Please, enter something and try again!\");\n        return\n    }\n    \n    imageApiService.resetPage();\n    loadButton.show();\n    loadButton.disable();\n    return imageApiService\n        .fetchImages()\n        .then(data => {\n            message(data);\n            return data.hits\n        })\n        .then(makeMarkup).catch(onError).finally(() => {\n        refs.form.reset();\n        loadButton.enable();\n    });\n    clearGalleryContainer();\n    \n}\n\nfunction onLoadButtonClick(event) {\n    loadButton.disable();\n    loadButton.show();\n    return imageApiService\n        .fetchImages()\n        .then(data => {\n            message(data);\n            return data.hits\n        })\n        .then(makeMarkup).catch(onError).finally(() => {\n        refs.form.reset();\n        loadButton.enable();\n    });\n    \n}\n\n\n\nfunction makeMarkup(hits) {\n    const { webformatURL, largeImageURL, tags, likes, views, comments, downloads } = hits;\n    let markup = \"\";\n\n    markup = hits.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => {\n        return `<a href=\"${largeImageURL}\" class=\"image-link\"><div class=\"photo-card\">\n  <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n  <div class=\"info\">\n    <p class=\"info-item\">\n      <b>Likes:</b>\n      <span>${likes}<span>\n    </p>\n    <p class=\"info-item\">\n      <b>Views:</b>\n      <span>${views}</span>\n    </p>\n    <p class=\"info-item\">\n      <b>Comments:</b>\n      <span> ${comments}</span>\n    </p>\n    <p class=\"info-item\">\n      <b>Downloads: </b>\n      <span>${downloads}</span>\n    </p>\n  </div>\n</div></a>`}).join('');\n\n    refs.galleryContainer.insertAdjacentHTML(\"beforeend\", markup);\n    return markup, gallery.refresh();\n}\n\nfunction message(data) {\n    if (imageApiService.page === 2) {\n    Notiflix.Notify.success(`Hooray! We found ${data.totalHits} images.`); \n    }else if (data.hits.length < imageApiService.perPage) {\n    loadButton.hide();\n    Notiflix.Notify.warning(\"We're sorry, but you've reached the end of search results.\");\n    } \n    console.log(data.hits);\n  }\n\n\nfunction clearGalleryContainer() {\n    refs.galleryContainer.innerHTML = \"\";\n}\n\nfunction onError(error) {\n    console.log(error);\n  Notiflix.Notify.failure(\n    'Sorry, there are no images matching your search query. Please try again.'\n  );\n  \n  loadButton.hide();\n}","class LoadButton {\n    constructor({ selector, isHidden }) {\n    this.button = this.getButton(selector);\n    if (isHidden) this.hide();\n    else this.show();\n  }\n\n  getButton(selector) {\n    return document.querySelector(selector);\n  }\n\n  hide() {\n    this.button.classList.add(\"hidden\");\n  }\n\n  show() {\n    this.button.classList.remove(\"hidden\");\n  }\n\n  disable() {\n    this.button.disabled = true;\n    this.button.textContent = \"Loading...\";\n    }\n\n    enable() {\n    this.button.removeAttribute('disabled');\n    this.button.textContent = \"Load more\";\n  }\n}\n    \n\n\nexport { LoadButton };"],"names":["$6eqiI","parcelRequire","$8MBJY","$ac0abeaa1fd26592$export$41861f0311224bab","LoadButton","param","selector","isHidden","this","button","getButton","hide","show","key","document","querySelector","classList","add","remove","disabled","textContent","removeAttribute","$6f7765f176d58681$var$refs","form","galleryContainer","infoItem","querySelectorAll","$6f7765f176d58681$var$imageApiService","ImageApiService","$6f7765f176d58681$var$loadButton","$6f7765f176d58681$var$gallery","$parcel$interopDefault","$5IjG7","$6f7765f176d58681$var$makeMarkup","hits","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","map","concat","join","insertAdjacentHTML","refresh","$6f7765f176d58681$var$message","data","page","$6JpON","Notify","success","totalHits","length","perPage","warning","console","log","$6f7765f176d58681$var$onError","error","failure","style","display","justifyContent","padding","backgroundColor","flexWrap","gap","addEventListener","event","preventDefault","query","currentTarget","elements","searchQuery","value","trim","resetPage","disable","fetchImages","then","catch","finally","reset","enable"],"version":3,"file":"load-button.3f071570.js.map"}